<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encuesta Donantes de Sangre</title>
  <style>
    /* Estilos generales */
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #333;
      text-align: center;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    h2 {
      color: #555;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
      margin-top: 25px;
    }
    .question {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input[type="text"], input[type="date"], input[type="tel"], select {
      width: calc(100% - 22px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 5px;
    }
    
    /* Estilos para la pantalla de video */
    #video-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
    }
    
    #video-container {
      width: 80%;
      max-width: 800px;
      margin: 20px 0;
    }
    
    #video-message {
      color: white;
      margin: 20px 0;
      font-size: 1.2em;
      text-align: center;
      max-width: 80%;
    }
    
    #video-understood {
      margin: 30px 0;
      background-color: #27ae60;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1.1em;
      display: none;
      position: sticky;
      bottom: 30px;
    }
    
    #video-understood:hover {
      background-color: #1e8449;
    }
    
    #intro-video {
      width: 100%;
      height: auto;
      max-height: 70vh;
    }
    
    #main-content {
      display: none;
    }
    
    /* Estilos para los botones de Sí/No (SOLUCIÓN) */
    .respuesta-group {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
    .opcion-btn {
      padding: 10px 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      background-color: #f0f0f0;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
      flex: 1;
      text-align: center;
    }
    .opcion-btn:hover {
      background-color: #e0e0e0;
    }
    .opcion-btn input[type="radio"] {
      display: none; /* Oculta el radio button original */
    }
    .opcion-btn input[type="radio"]:checked + span {
      color: white;
      font-weight: bold;
    }
    .opcion-btn input[type="radio"]:checked[value="si"] + span {
      background-color: #27ae60; /* Color verde */
      border-color: #27ae60;
    }
    .opcion-btn input[type="radio"]:checked[value="no"] + span {
      background-color: #e74c3c; /* Color rojo */
      border-color: #e74c3c;
    }

    /* Navegación y otros botones */
    .navigation {
      text-align: center;
      margin-top: 20px;
    }
    .navigation button {
      padding: 10px 20px;
      margin: 5px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .navigation button:hover {
      background-color: #2980b9;
    }
    .audio-btn {
      background: none;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
      margin-left: 5px;
      vertical-align: middle;
    }
    .audio-btn:hover {
      color: #3498db;
    }

    .page { display: none; }
    .page.active { display: block; }
  </style>
</head>
<body>

  <div id="video-screen">
    <div id="video-message">
      Por favor, mira el video completo antes de continuar.
    </div>
    
    <div id="video-container">
      <video id="intro-video" controls>
        <source src="video_donacion.mp4" type="video/mp4">
        Tu navegador no soporta el elemento de video.
      </video>
    </div>
    
    <button id="video-understood" onclick="proceedToSurvey()">
      Sí, entendí el mensaje. Continuar con la encuesta
    </button>
  </div>

  <div id="main-content">
    <div class="container">
      <h1>Encuesta de Selección de Donantes</h1>
      <form id="donantesForm">
        
        <div id="page1" class="page active">
          <div class="question">
            <label>1. ¿Leyó y entendió la información que se le dio antes de la donación?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿Leyó y entendió la información que se le dio antes de la donación?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="entendio_info" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="entendio_info" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          <div class="navigation">
            <button type="button" onclick="nextPage()" id="next-page-btn-1" style="display:none;">Siguiente</button>
          </div>
        </div>

        <div id="page2" class="page">
          <h2>Datos Personales</h2>
          <div class="question">
            <label>2. Primer Nombre</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Primer nombre')">🔊</button>
            <input type="text" name="primer_nombre" required>
          </div>
          <div class="question">
            <label>3. Segundo Nombre</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Segundo nombre')">🔊</button>
            <input type="text" name="segundo_nombre">
          </div>
          <div class="question">
            <label>4. Primer Apellido</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Primer apellido')">🔊</button>
            <input type="text" name="primer_apellido" required>
          </div>
          <div class="question">
            <label>5. Segundo Apellido</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Segundo apellido')">🔊</button>
            <input type="text" name="segundo_apellido">
          </div>
          <div class="question">
            <label>6. Fecha de nacimiento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Fecha de nacimiento')">🔊</button>
            <input type="date" name="fecha_nacimiento" required>
          </div>
          <div class="question">
            <label>7. Documento de identidad</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Documento de identidad')">🔊</button>
            <input type="text" name="documento" required>
          </div>
          <div class="question">
            <label>8. Estado Civil</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Estado civil')">🔊</button>
            <select name="estado_civil">
              <option value="">Seleccione</option>
              <option value="soltero">Soltero(a)</option>
              <option value="casado">Casado(a)</option>
              <option value="union_libre">Unión libre</option>
              <option value="otro">Otro</option>
            </select>
          </div>
          <div class="question">
            <label>9. Grupo Sanguíneo / RH</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Grupo sanguíneo y factor RH')">🔊</button>
            <input type="text" name="grupo_rh">
          </div>
          <div class="question">
            <label>10. Lugar de Donación (ciudad o municipio)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Lugar de donación, ciudad o municipio')">🔊</button>
            <input type="text" name="lugar_donacion">
          </div>
          <div class="question">
            <label>11. Barrio</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Barrio')">🔊</button>
            <input type="text" name="barrio">
          </div>
          <div class="question">
            <label>12. Localidad</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Localidad')">🔊</button>
            <input type="text" name="localidad">
          </div>
          <div class="question">
            <label>13. Teléfono Principal</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Teléfono principal')">🔊</button>
            <input type="tel" name="telefono">
          </div>
          <div class="question">
            <label>14. Celular</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Número de celular')">🔊</button>
            <input type="tel" name="celular">
          </div>
          <div class="question">
            <label>Departamento</label>
            <select id="departamento" name="departamento" required>
              <option value="">Seleccione un departamento</option>
              <option value="Cundinamarca">Cundinamarca</option>
              <option value="Antioquia">Antioquia</option>
              <option value="Valle del Cauca">Valle del Cauca</option>
            </select>
          </div>
          <div class="question">
            <label>Municipio</label>
            <select id="municipio" name="municipio" required>
              <option value="">Seleccione un municipio</option>
            </select>
          </div>
          <div class="question">
            <label>15. Ocupación / Empleo</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Ocupación o empleo')">🔊</button>
            <input type="text" name="ocupacion">
          </div>
          <div class="question">
            <label>16. Nombre de usuario en redes sociales</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Nombre de usuario en redes sociales')">🔊</button>
            <input type="text" name="usuario_red">
          </div>
          <div class="question">
            <label>17. Celular de contacto</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Celular de contacto')">🔊</button>
            <input type="tel" name="celular_contacto">
          </div>
          <div class="navigation">
            <button type="button" onclick="prevPage(1)">Anterior</button>
            <button type="button" onclick="nextPage()">Siguiente</button>
          </div>
        </div>

        <div id="page3" class="page">
          <h2>Antecedentes Médicos</h2>
          
          <div class="question">
            <label>1. ¿Ha donado sangre anteriormente?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿Ha donado sangre anteriormente?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="ha_donado" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="ha_donado" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          
          <div class="question">
            <label>2. ¿Ha sido declarado alguna vez no apto para donar sangre?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿Ha sido declarado alguna vez no apto para donar sangre?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="no_apto" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="no_apto" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          
          <div class="question">
            <label>3. ¿Se ha sentido bien de salud en las últimas dos semanas?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿Se ha sentido bien de salud en las últimas dos semanas?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="salud_bien" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="salud_bien" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          
          <div class="question">
            <label>4. ¿En los últimos 12 meses estuvo hospitalizado?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿En los últimos 12 meses estuvo hospitalizado?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="hospitalizado" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="hospitalizado" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          
          <div class="question">
            <label>5. ¿Usted o su pareja han recibido transfusiones de sangre?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿Usted o su pareja han recibido transfusiones de sangre?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="transfusion" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="transfusion" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          
          <div class="question">
            <label>6. ¿En los últimos 7 días ha recibido tratamiento odontológico?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('¿En los últimos 7 días ha recibido tratamiento odontológico?')">🔊</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="odontologia" value="si" required> <span>Sí</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="odontologia" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          
          <div class="navigation">
            <button type="button" onclick="prevPage(2)">Anterior</button>
            <button type="submit">Enviar Encuesta</button>
          </div>
        </div>

      </form>
    </div>
  </div>

  <script>
    // Función para continuar a la encuesta
    function proceedToSurvey() {
      const videoScreen = document.getElementById('video-screen');
      const mainContent = document.getElementById('main-content');
      
      if(videoScreen && mainContent) {
        videoScreen.style.display = 'none';
        mainContent.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        console.error("Error: No se encontraron los elementos necesarios");
      }
    }

    // Control del video
    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('intro-video');
      const understoodBtn = document.getElementById('video-understood');
      const videoMessage = document.getElementById('video-message');
      
      if(video && understoodBtn && videoMessage) {
        setTimeout(() => {
          video.play();
        }, 2000);
        video.addEventListener('ended', function() {
          videoMessage.textContent = "¿Entendió el mensaje del video?";
          understoodBtn.style.display = 'block';
          understoodBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
      }
    });

    // Función para leer texto
    function leerTexto(texto) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(texto);
      utterance.lang = 'es-ES';
      synth.speak(utterance);
    }

    // Manejar el envío del formulario
    document.getElementById('donantesForm')?.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Gracias por completar la encuesta. Sus respuestas han sido enviadas.');
      // Aquí puedes agregar la lógica para enviar el formulario a un servidor
    });

    // Lógica para la navegación entre páginas
    let currentPage = 1;
    const totalPages = 3;

    function showPage(pageNumber) {
      document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
      const pageToShow = document.getElementById('page' + pageNumber);
      if (pageToShow) {
        pageToShow.classList.add('active');
        currentPage = pageNumber;
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    function nextPage() {
      if (currentPage < totalPages) {
        showPage(currentPage + 1);
      }
    }

    function prevPage(pageNumber) {
        showPage(pageNumber);
    }

    // Lógica para mostrar el botón de siguiente en la primera página
    document.addEventListener('DOMContentLoaded', function() {
      const radioButtons = document.querySelectorAll('input[name="entendio_info"]');
      const nextPageBtn = document.getElementById('next-page-btn-1');

      if (radioButtons.length > 0 && nextPageBtn) {
        radioButtons.forEach(radio => {
          radio.addEventListener('change', function() {
            if (this.checked) {
              // Muestra el botón de Siguiente cuando una opción es seleccionada
              nextPageBtn.style.display = 'block';
            }
          });
        });
      }
    });
    
    document.addEventListener('DOMContentLoaded', function() {
      showPage(1); // Muestra la primera página al cargar
    });
  </script>

  <script src="departamentos_municipios.js"></script>
</body>
</html>
