<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encuesta Donantes de Sangre</title>
  <style>
    /* Estilos para la pantalla de video */
    #video-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
    }
    
    #video-container {
      width: 80%;
      max-width: 800px;
      margin: 20px 0;
    }
    
    #video-message {
      color: white;
      margin: 20px 0;
      font-size: 1.2em;
      text-align: center;
      max-width: 80%;
    }
    
    #video-understood {
      margin: 30px 0;
      background-color: #27ae60;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1.1em;
      display: none;
      position: sticky;
      bottom: 30px;
    }
    
    #video-understood:hover {
      background-color: #1e8449;
    }
    
    #intro-video {
      width: 100%;
      height: auto;
      max-height: 70vh;
    }
    
    /* CORRECCIÓN IMPORTANTE: El ID main-content estaba mal cerrado */
    #main-content {
      display: none;
    }
    
    /* Estilos originales del formulario */
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
    }
    /* ... otros estilos ... */
  </style>
</head>
<body>
  <!-- Pantalla de video -->
  <div id="video-screen">
    <div id="video-message">
      Por favor, mira el video completo antes de continuar.
    </div>
    
    <div id="video-container">
      <video id="intro-video" controls>
        <source src="video_donacion.mp4" type="video/mp4">
        Tu navegador no soporta el elemento de video.
      </video>
    </div>
    
    <button id="video-understood" onclick="proceedToSurvey()">
      Sí, entendí el mensaje. Continuar con la encuesta
    </button>
  </div>

  <!-- CORRECCIÓN IMPORTANTE: Había un error de sintaxis aquí -->
  <!-- La comilla después de main-content estaba mal colocada -->
  <div id="main-content">
    <h1>Encuesta de Selección de Donantes</h1>
    <form id="donantesForm">
  <div id="page1" class="page">
      <!-- Todo el contenido de tu encuesta aquí -->
       <label>1. ¿Leyó y entendió la información que se le dio antes de la donación?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿Leyó y entendió la información que se le dio antes de la donación?')">🔊</button>
      <select name="entendio_info" required>
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>

    </div>
  <div id="page2" class="page">
  <h2>Datos Personales</h2>
    <div class="question">
      <label>2. Primer Nombre</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Primer nombre')">🔊</button>
      <input type="text" name="primer_nombre" required>
    </div>
    <div class="question">
      <label>3. Segundo Nombre</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Segundo nombre')">🔊</button>
      <input type="text" name="segundo_nombre">
    </div>
    <div class="question">
      <label>4. Primer Apellido</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Primer apellido')">🔊</button>
      <input type="text" name="primer_apellido" required>
    </div>
    <div class="question">
      <label>5. Segundo Apellido</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Segundo apellido')">🔊</button>
      <input type="text" name="segundo_apellido">
    </div>
    <div class="question">
      <label>6. Fecha de nacimiento</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Fecha de nacimiento')">🔊</button>
      <input type="date" name="fecha_nacimiento" required>
    </div>
    <div class="question">
      <label>7. Documento de identidad</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Documento de identidad')">🔊</button>
      <input type="text" name="documento" required>
    </div>
    <div class="question">
      <label>8. Estado Civil</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Estado civil')">🔊</button>
      <select name="estado_civil">
        <option value="">Seleccione</option>
        <option value="soltero">Soltero(a)</option>
        <option value="casado">Casado(a)</option>
        <option value="union_libre">Unión libre</option>
        <option value="otro">Otro</option>
      </select>
    </div>
    <div class="question">
      <label>9. Grupo Sanguíneo / RH</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Grupo sanguíneo y factor RH')">🔊</button>
      <input type="text" name="grupo_rh">
    </div>
    <div class="question">
      <label>10. Lugar de Donación (ciudad o municipio)</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Lugar de donación, ciudad o municipio')">🔊</button>
      <input type="text" name="lugar_donacion">
    </div>
    <div class="question">
      <label>11. Barrio</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Barrio')">🔊</button>
      <input type="text" name="barrio">
    </div>
    <div class="question">
      <label>12. Localidad</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Localidad')">🔊</button>
      <input type="text" name="localidad">
    </div>
    <div class="question">
      <label>13. Teléfono Principal</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Teléfono principal')">🔊</button>
      <input type="tel" name="telefono">
    </div>
    <div class="question">
      <label>14. Celular</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Número de celular')">🔊</button>
      <input type="tel" name="celular">
    </div>
<div class="question">
  <label>Departamento</label>
  <select id="departamento" name="departamento" required>
    <option value="">Seleccione un departamento</option>
    <option value="Cundinamarca">Cundinamarca</option>
    <option value="Antioquia">Antioquia</option>
    <option value="Valle del Cauca">Valle del Cauca</option>
  </select>
</div>

<div class="question">
  <label>Municipio</label>
  <select id="municipio" name="municipio" required>
    <option value="">Seleccione un municipio</option>
  </select>
</div>

    <div class="question">
      <label>15. Ocupación / Empleo</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Ocupación o empleo')">🔊</button>
      <input type="text" name="ocupacion">
    </div>
    <div class="question">
      <label>16. Nombre de usuario en redes sociales</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Nombre de usuario en redes sociales')">🔊</button>
      <input type="text" name="usuario_red">
    </div>
    <div class="question">
      <label>17. Celular de contacto</label>
      <button type="button" class="audio-btn" onclick="leerTexto('Celular de contacto')">🔊</button>
      <input type="tel" name="celular_contacto">
    </div>

    </div>
  <div id="page3" class="page">
  <h2>Antecedentes Médicos</h2>
    <div class="question">
      <label>1. ¿Ha donado sangre anteriormente?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿Ha donado sangre anteriormente?')">🔊</button>
      <select name="ha_donado">
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>
    <div class="question">
      <label>2. ¿Ha sido declarado alguna vez no apto para donar sangre?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿Ha sido declarado alguna vez no apto para donar sangre?')">🔊</button>
      <select name="no_apto">
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>
    <div class="question">
      <label>3. ¿Se ha sentido bien de salud en las últimas dos semanas?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿Se ha sentido bien de salud en las últimas dos semanas?')">🔊</button>
      <select name="salud_bien">
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>
    <div class="question">
      <label>4. ¿En los últimos 12 meses estuvo hospitalizado?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿En los últimos 12 meses estuvo hospitalizado?')">🔊</button>
      <select name="hospitalizado">
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>
    <div class="question">
      <label>5. ¿Usted o su pareja han recibido transfusiones de sangre?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿Usted o su pareja han recibido transfusiones de sangre?')">🔊</button>
      <select name="transfusion">
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>
    <div class="question">
      <label>6. ¿En los últimos 7 días ha recibido tratamiento odontológico?</label>
      <button type="button" class="audio-btn" onclick="leerTexto('¿En los últimos 7 días ha recibido tratamiento odontológico?')">🔊</button>
      <select name="odontologia">
        <option value="">Seleccione</option>
        <option value="si">Sí</option>
        <option value="no">No</option>
      </select>
    </div>
      </div>
  <div class="navigation">
    <button type="button" onclick="prevPage(2)">Anterior</button>
    <button type="submit">Enviar Encuesta</button>
  </div>
    </form>
  </div>

  <script>
    // Función para continuar a la encuesta - VERSIÓN CORREGIDA
    function proceedToSurvey() {
      const videoScreen = document.getElementById('video-screen');
      const mainContent = document.getElementById('main-content');
      
      if(videoScreen && mainContent) {
        videoScreen.style.display = 'none';
        mainContent.style.display = 'block';
        
        // Hacer scroll al inicio del formulario
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      } else {
        console.error("Error: No se encontraron los elementos necesarios");
      }
    }

    // Control del video
    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('intro-video');
      const understoodBtn = document.getElementById('video-understood');
      const videoMessage = document.getElementById('video-message');
      
      if(video && understoodBtn && videoMessage) {
        video.addEventListener('ended', function() {
          videoMessage.textContent = "¿Entendió el mensaje del video?";
          understoodBtn.style.display = 'block';
          understoodBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
      }
    });

    // Función original para leer texto
    function leerTexto(texto) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(texto);
      utterance.lang = 'es-ES';
      synth.speak(utterance);
    }

    // Manejar el envío del formulario
    document.getElementById('donantesForm')?.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Gracias por completar la encuesta. Sus respuestas han sido enviadas.');
    });
  </script>

  <!-- Scripts adicionales -->
  <script src="departamentos_municipios.js"></script>
  <script>
    // Tu código para departamentos y municipios
  </script>

<style>
  .page { display: none; }
  .page.active { display: block; }
  .navigation { text-align: center; margin-top: 20px; }
  .navigation button { padding: 10px 20px; margin: 5px; }
  .toggle-btn {
    padding: 10px 20px;
    margin: 5px;
    background-color: #ddd;
    border: none;
    cursor: pointer;
    border-radius: 5px;
  }
  .toggle-btn.active-si {
    background-color: green;
    color: white;
  }
  .toggle-btn.active-no {
    background-color: red;
    color: white;
  }
</style>
<script>
  function showPage(pageNumber) {
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    document.getElementById('page' + pageNumber).classList.add('active');
  }
  function nextPage(pageNumber) { showPage(pageNumber); }
  function prevPage(pageNumber) { showPage(pageNumber); }
  document.addEventListener('DOMContentLoaded', function() {
    showPage(1);
    document.querySelectorAll('.toggle-group').forEach(group => {
      group.querySelectorAll('.toggle-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          group.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active-si', 'active-no'));
          const val = this.getAttribute('data-value');
          if (val === 'si') { this.classList.add('active-si'); }
          else { this.classList.add('active-no'); }
          group.querySelector('input[type="hidden"]').value = val;
        });
      });
    });
  });
</script>
</body>
</html>
