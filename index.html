<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encuesta Donantes de Sangre</title>
  <style>
    /* Estilos generales */
    body {
      background-color: #ACD7CA;
      color: #316857;
      font-family: "Trebuchet MS", Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #1A4A5D;
      text-align: center;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    h2 {
      color: #1A4A5D;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
      margin-top: 25px;
    }
    .question {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input[type="text"], input[type="date"], input[type="tel"], input[type="email"], select {
      width: calc(100% - 22px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 5px;
      font-family: "Trebuchet MS", Arial, sans-serif;
      font-size: 14px;
    }
    
    /* Estilos para la pantalla de video */
    #video-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
    }
    
    #video-container {
      width: 80%;
      max-width: 800px;
      margin: 20px 0;
    }
    
    #video-message {
      color: white;
      margin: 20px 0;
      font-size: 1.2em;
      text-align: center;
      max-width: 80%;
    }
    
    #video-understood {
      margin: 30px 0;
      background-color: #27ae60;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1.1em;
      display: none;
      position: sticky;
      bottom: 30px;
    }
    
    #video-understood:hover {
      background-color: #1e8449;
    }
    
    #intro-video {
      width: 100%;
      height: auto;
      max-height: 70vh;
    }
    
    /* Estilos para el logo fijo y centrado */
    #logo-fixed-header {
        position: fixed; /* Lo fija en la pantalla */
        top: 0;
        left: 0;
        width: 100%;
        text-align: center; /* Centra el logo horizontalmente */
        background-color: #ACD7CA; /* Color de fondo del encabezado */
        z-index: 1001; /* Asegura que est칠 por encima de otros elementos */
        padding: 10px 0; /* Espaciado interno */
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .logo {
        height: 80px; /* Mantiene el mismo tama침o del logo */
    }
    #main-content {
        display: none;
        padding-top: 100px; /* Agrega un padding superior para que el contenido no se oculte detr치s del logo fijo */
    }
    
    /* Estilos para los botones de S칤/No (SOLUCI칍N) */
    .respuesta-group {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
    .opcion-btn {
      padding: 10px 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      background-color: #f0f0f0;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
      flex: 1;
      text-align: center;
    }
    .opcion-btn:hover {
      background-color: #e0e0e0;
    }
    .opcion-btn input[type="radio"] {
      display: none; /* Oculta el radio button original */
    }
    .opcion-btn input[type="radio"]:checked + span {
      color: white;
      font-weight: bold;
    }
    .opcion-btn input[type="radio"]:checked[value="si"] + span {
      background-color: #27ae60; /* Color verde */
      border-color: #27ae60;
    }
    .opcion-btn input[type="radio"]:checked[value="no"] + span {
      background-color: #e74c3c; /* Color rojo */
      border-color: #e74c3c;
    }

    /* Navegaci칩n y otros botones */
    .navigation {
      text-align: center;
      margin-top: 20px;
    }
    .navigation button {
      padding: 10px 20px;
      margin: 5px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .navigation button:hover {
      background-color: #2980b9;
    }
    .audio-btn {
      background: none;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
      margin-left: 5px;
      vertical-align: middle;
    }
    .audio-btn:hover {
      color: #3498db;
    }

    .page { display: none; }
    .page.active { display: block; }
    
    /* Estilos para preguntas condicionales */
    .conditional-questions {
      margin-top: 15px;
      padding: 15px;
      background-color: #f9f9f9;
      border-left: 4px solid #3498db;
      border-radius: 4px;
      display: none;
    }
    
    .conditional-questions.active {
      display: block;
    }
    
    .conditional-question {
      margin-bottom: 10px;
    }
    
    .conditional-question label {
      font-weight: normal;
      margin-bottom: 3px;
    }
    
    .conditional-question input[type="text"],
    .conditional-question input[type="date"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <div id="logo-fixed-header">
    <img src="logo.png" alt="Logo Banco de Sangre" class="logo">
  </div>

  <div id="video-screen">
    <div id="video-message">
      Por favor, mira el video completo antes de continuar.
    </div>
    
    <div id="video-container">
      <video id="intro-video" controls muted>
        <source src="video_donacion.mp4" type="video/mp4">
        Tu navegador no soporta el elemento de video.
      </video>
    </div>
    
    <button id="video-understood" onclick="proceedToSurvey()">
      S칤, entend칤 el mensaje. Continuar con la encuesta
    </button>
  </div>

  <div id="main-content">
    <div class="container">
      <h1>Encuesta de Selecci칩n de Donantes</h1>
      <form id="donantesForm">

        <!-- P츼GINA 1 -->
        <div id="page1" class="page active">
          <div class="question">
            <label>1. 쯃ey칩 y entendi칩 la informaci칩n que se le dio antes de la donaci칩n?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯃ey칩 y entendi칩 la informaci칩n que se le dio antes de la donaci칩n?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="entendio_info" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="entendio_info" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          <div class="navigation">
            <button type="button" onclick="nextPage()" id="next-page-btn-1" style="display:none;">Siguiente</button>
          </div>
        </div>

        <!-- P츼GINA 2 - DATOS PERSONALES -->
        <div id="page2" class="page">
          <h2>Datos Personales</h2>
          <div class="question">
            <label>1. Primer Nombre</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Primer nombre')">游댉</button>
            <input type="text" name="primer_nombre" required>
          </div>
          <div class="question">
            <label>2. Segundo Nombre</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Segundo nombre')">游댉</button>
            <input type="text" name="segundo_nombre">
          </div>
          <div class="question">
            <label>3. Primer Apellido</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Primer apellido')">游댉</button>
            <input type="text" name="primer_apellido" required>
          </div>
          <div class="question">
            <label>4. Segundo Apellido</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Segundo apellido')">游댉</button>
            <input type="text" name="segundo_apellido">
          </div>
          <div class="question">
            <label>5. Lugar de Nacimiento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Lugar de Nacimiento')">游댉</button>
            <input type="text" name="lugar_nacimiento" required>
          </div>
          <div class="question">
            <label>6. Edad (A침os)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Edad en a침os')">游댉</button>
            <input type="text" name="edad" required>
          </div>
          <div class="question">
            <label>7. G칠nero</label>
            <button type="button" class="audio-btn" onclick="leerTexto('G칠nero')">游댉</button>
            <select name="genero">
              <option value="">Seleccione</option>
              <option value="Masculino">Masculino</option>
              <option value="Femenino">Femenino</option>
            </select>
          </div>
          <div class="question">
            <label>8. Tipo de Documento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Tipo de Documento')">游댉</button>
            <select name="tipo_documento">
              <option value="">Seleccione</option>
              <option value="Cedula de Ciudadania">CC</option>
              <option value="Cedula de Extranger칤a">CE</option>
              <option value="Pasaporte">Pasaporte</option>
              <option value="PPT">PPT</option>
              <option value="PPE">PPE</option>
              <option value="NIUP">NIUP</option>
            </select>
          </div>
          <div class="question">
            <label>9. N칰mero de documento de identidad</label>
            <button type="button" class="audio-btn" onclick="leerTexto('N칰mero de su documento de identidad')">游댉</button>
            <input type="text" name="numero_documento" required>
          </div>
          <div class="question">
            <label>10. Estado Civil</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Estado civil')">游댉</button>
            <select name="estado_civil">
              <option value="">Seleccione</option>
              <option value="soltero">Soltero(a)</option>
              <option value="casado">Casado(a)</option>
              <option value="union_libre">Uni칩n libre</option>
              <option value="viudo">Viudo(a)</option>
            </select>
          </div>
          <div class="question">
            <label>11. Afiliaci칩n al sistema de Salud</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Afiliaci칩n al sistema de Salud')">游댉</button>
            <select name="afiliacion_salud">
              <option value="">Seleccione</option>
              <option value="No tiene">No tiene</option>
              <option value="EPS">EPS</option>
              <option value="Regimen Especial">Regimen Especial</option>
              <option value="Sisben">Sisben</option>
            </select>
          </div>
          <div class="question">
            <label>12 Grupo Sanguineo RH</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Seleccione su grupo sanguineo')">游댉</button>
            <select name="Grupo Sanguineo">
              <option value="">Seleccione</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="O+">O+</option>
              <option value="O-">O-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB-</option>
              <option value="Otro">Otro</option>
              <option value="No sabe">No sabe</option>
            </select>
          </div>
          <div class="question">
            <label>13. Lugar de Donaci칩n (ciudad o municipio)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Lugar de donaci칩n, ciudad o municipio')">游댉</button>
            <input type="text" name="lugar_donacion">
          </div>
          <div class="question">
            <label>14. Direcci칩n de residencia</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Direcci칩n de su residencia')">游댉</button>
            <input type="text" name="direccion_residencia">
          </div>
          <div class="question">
            <label>15. Barrio</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Barrio')">游댉</button>
            <input type="text" name="barrio">
          </div>
          <div class="question">
            <label>16. Localidad</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Localidad')">游댉</button>
            <input type="text" name="localidad">
          </div>
          <div class="question">
            <label>17. Departamento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Departamento')">游댉</button>
            <select id="departamento" name="departamento" required>
              <option value="">Seleccione un departamento</option>
            </select>
          </div>
          <div class="question">
            <label>18. Municipio</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Municipio')">游댉</button>
            <select id="municipio" name="municipio" required>
              <option value="">Seleccione un municipio</option>
            </select>
          </div>
          <div class="question">
            <label>19. Tel칠fono Principal</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Tel칠fono principal')">游댉</button>
            <input type="tel" name="telefono">
          </div>
          <div class="question">
            <label>20. Celular</label>
            <button type="button" class="audio-btn" onclick="leerTexto('N칰mero de celular')">游댉</button>
            <input type="tel" name="celular">
          </div>
          <div class="question">
            <label>21. Ocupaci칩n / Empleo</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Ocupaci칩n o empleo')">游댉</button>
            <input type="text" name="ocupacion">
          </div>
          <div class="question">
            <label>22. Tel칠fono de Trabajo</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Tel칠fono de su trabajo')">游댉</button>
            <input type="tel" name="telefono_trabajo">
          </div>
          <div class="question">
            <label>23. Correo Electr칩nico</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Digite un correo electr칩nico')">游댉</button>
            <input type="email" name="correo_electronico" style="font-family: 'Trebuchet MS', Arial, sans-serif;">
          </div>
          <div class="question">
            <label>24. Redes sociales</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Seleccione la red social que mas usa')">游댉</button>
            <select name="redes_sociales">
              <option value="">Seleccione</option>
              <option value="Facebook">Facebook</option>
              <option value="Instagram">Instagram</option>
              <option value="X">X</option>
              <option value="Tik Tok">Tik Tok</option>
              <option value="Youtube">Youtube</option>
              <option value="Telegram">Telegram</option>
              <option value="Whatsapp">Whatsapp</option>
              <option value="Linked In">Linked In</option>
            </select>
          </div>
          <div class="question">
            <label>25. Usuario de Red social</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Cual es el usuario de la red seleccionada')">游댉</button>
            <input type="text" name="usuario_red_social">
          </div>
          <div class="question">
            <label>26. Nombre de un familiar y/o contacto</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Nombre de alg칰n familiar o contacto')">游댉</button>
            <input type="text" name="familiar_contacto">
          </div>
          <div class="question">
            <label>27. Celular de contacto</label>
            <button type="button" class="audio-btn" onclick="leerTexto('N칰mero de celular de la persona que puso de contacto')">游댉</button>
            <input type="tel" name="celular_contacto">
          </div>
          
          <div class="navigation">
            <button type="button" onclick="prevPage(1)">Anterior</button>
            <button type="button" onclick="nextPage()">Siguiente</button>
          </div>
        </div>

        <!-- P츼GINA 3 - ANTECEDENTES M칄DICOS -->
        <div id="page3" class="page">
          <h2>Antecedentes M칠dicos</h2>
      
          <!-- Pregunta 1: Donaci칩n anterior (CON FUNCIONALIDAD CONDICIONAL) -->
          <div class="question" id="donacion-anterior-container">
            <label>1. 쮿a donado sangre anteriormente?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a donado sangre anteriormente?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="ha_donado" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="ha_donado" value="no" required> <span>No</span>
              <label>
            </div>
    
            <!-- Preguntas condicionales que se muestran solo cuando la respuesta es "S칤" -->
            <div class="conditional-questions" id="donacion-detalles">
              <div class="conditional-question">
                <label>쮿ace cu치nto? (Escriba la fecha):</label>
                <input type="date" name="fecha_ultima_donacion">
              </div>
      
              <div class="conditional-question">
                <label>쮼n d칩nde don칩?:</label>
                <input type="text" name="lugar_donacion_anterior" placeholder="Ej: Cl칤nica, Hospital, Banco de Sangre...">
              </div>
      
              <div class="conditional-question">
                <label>쮿a tenido reacci칩n adversa a la donaci칩n?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="reaccion_adversa" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="reaccion_adversa" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <div class="conditional-question" id="reaccion-detalle-container" style="display: none;">
                <label>쯈u칠 present칩?:</label>
                <input type="text" name="reaccion_detalle" placeholder="Describa la reacci칩n">
              </div>
            </div>
          </div>
  
          <!-- Pregunta 2: Declarado no apto -->
          <div class="question" id="no-apto-container">
            <label>2. 쮿a sido declarado alguna vez no apto para donar sangre?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a sido declarado alguna vez no apto para donar sangre?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="no_apto" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="no_apto" value="no" required> <span>No</span>
              </label>
            </div>
    
            <div class="conditional-questions" id="no-apto-detalles">
              <div class="conditional-question">
                <label>쯇or qu칠?:</label>
                <input type="text" name="razon_no_apto" placeholder="Describa la raz칩n">
              </div>
            </div>
          </div>
  
          <!-- Pregunta 3: Salud en 칰ltimas 2 semanas -->
          <div class="question" id="salud-reciente-container">
            <label>3. 쯉e ha sentido bien de salud en las 칰ltimas dos (2) semanas?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯉e ha sentido bien de salud en las 칰ltimas dos semanas?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="salud_bien" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="salud_bien" value="no" required> <span>No</span>
              </label>
            </div>
    
            <div class="conditional-questions" id="sintomas-resfriado">
              <div class="conditional-question">
                <label>쮿a tenido gripa en las 칰ltimas dos (2) semanas?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tuvo_gripa" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tuvo_gripa" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
      
              <div class="conditional-question">
                <label>쮼st치 tosiendo o estornudando?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tos_estornudos" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tos_estornudos" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
  
          <!-- Pregunta 4: Hospitalizaci칩n -->
          <div class="question" id="hospitalizado-container">
            <label>4. 쮼n los 칰ltimos doce (12) meses estuvo Hospitalizado, bajo tratamiento m칠dico o le han realizado alguna cirug칤a?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos doce meses estuvo hospitalizado, bajo tratamiento m칠dico o le han realizado alguna cirug칤a?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="hospitalizado" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="hospitalizado" value="no" required> <span>No</span>
              </label>
            </div>
    
            <div class="conditional-questions" id="hospitalizacion-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="detalle_hospitalizacion" placeholder="Describa la situaci칩n">
              </div>
            </div>
          </div>

          <!-- Pregunta 5: Transfusiones -->
          <div class="question" id="transfusion-container">
            <label>5. 쮸lguna vez usted o su pareja, han recibido transfusi칩n sangu칤nea, trasplante de 칩rganos, tejidos u hormona del crecimiento?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮸lguna vez usted o su pareja han recibido transfusi칩n sangu칤nea, trasplante de 칩rganos, tejidos u hormona del crecimiento?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="transfusion" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="transfusion" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions" id="transfusion-detalles">
              <div class="conditional-question">
                <label>쮿ace cu치nto?:</label>
                <input type="text" name="tiempo_transfusion" placeholder="Ej: Hace 2 a침os, 6 meses...">
              </div>
            </div>
          </div>

          <!-- Pregunta 6: Tratamientos dentales -->
          <div class="question" id="odontologia-container">
            <label>6. 쮼n los 칰ltimos 7 d칤as le han realizado tratamientos dentales?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos 7 d칤as le han realizado tratamientos dentales?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="odontologia" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="odontologia" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions" id="odontologia-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="detalle_odontologia" placeholder="Ej: Extracci칩n, limpieza, empaste...">
              </div>
            </div>
          </div>

          <!-- Pregunta 7: Problemas de salud -->
          <div class="question">
            <label>7. 쮿a presentado alguno de los siguientes problemas de salud? (enfermedades de la sangre, coraz칩n, trastornos mentales, diabetes, c치ncer, enfermedades de pulm칩n, hipotensi칩n, hipertensi칩n)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a presentado alguno de los siguientes problemas de salud?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="problemas_salud" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="problemas_salud" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions" id="problemas-salud-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="detalle_problemas_salud" placeholder="Especifique la enfermedad">
              </div>

              <div class="conditional-question">
                <label>쯉ufre de alergias? 쮸 qu칠 es al칠rgico?:</label>
                <input type="text" name="alergias" placeholder="Ej: Penicilina, polen, alimentos...">
              </div>

              <div class="conditional-question">
                <label>쯋sted o alguien de su familia sufre de anemia falciforme o rasgo de anemia falciforme?</label>
                <input type="text" name="anemia_falciforme" placeholder="Especifique qui칠n y relaci칩n">
              </div>
            </div>
          </div>

          <!-- Pregunta 8: Medicamentos y otras enfermedades -->
          <div class="question">
            <label>8. En el 칰ltimo mes 쯛a tomado alg칰n medicamento?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('En el 칰ltimo mes, 쯛a tomado alg칰n medicamento?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="tomo_medicamento" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="tomo_medicamento" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions" id="medicamentos-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="nombre_medicamento" placeholder="Nombre del medicamento">
              </div>

              <div class="conditional-question">
                <label>쯇ara qu칠 le fue formulado?:</label>
                <input type="text" name="razon_medicamento" placeholder="Motivo del tratamiento">
              </div>

              <div class="conditional-question">
                <label>쮿a padecido o padece de alguna enfermedad no mencionada anteriormente? 쮺u치l?:</label>
                <input type="text" name="otras_enfermedades" placeholder="Otras enfermedades">
              </div>
            </div>
          </div>

          <!-- Pregunta 9: S칤ntomas 칰ltimos 6 meses -->
          <div class="question">
            <label>9. 쮼n los 칰ltimos seis (6) meses ha presentado alguno de los siguientes s칤ntomas? P칠rdida de peso inexplicable, Diarrea frecuente no controlable, Sudoraci칩n nocturna, Tos persistente (por m치s de dos semanas), Inflamaci칩n permanente de los ganglios, Manchas o lesiones en la piel o mucosas, Fiebres frecuentes.</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos seis meses ha presentado alguno de los siguientes s칤ntomas?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="sintomas_recientes" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="sintomas_recientes" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions" id="sintomas-detalles">
              <div class="conditional-question">
                <label>Especifique los s칤ntomas:</label>
                <input type="text" name="detalle_sintomas" placeholder="Describa los s칤ntomas presentados">
              </div>
            </div>
          </div>

          <!-- Pregunta 10: Vacunaci칩n -->
          <div class="question" id="vacunacion-container">
            <label>10. 쮿a sido vacunado en el 칰ltimo a침o?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a sido vacunado en el 칰ltimo a침o?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="vacunado" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="vacunado" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions" id="vacunacion-detalles">
              <div class="conditional-question">
                <label>쯈u칠 vacuna recibi칩?:</label>
                <input type="text" name="tipo_vacuna" placeholder="Ej: Influenza, COVID-19, Hepatitis...">
              </div>
            </div>
          </div>

          <div class="navigation">
            <button type="button" onclick="prevPage(2)">Anterior</button>
            <button type="submit">Enviar Encuesta</button>
          </div>
        </div> 
      </form>
    </div>
  </div>

  <script src="departamentos_municipios.js"></script>
  <script>
    // --- L칍GICA GENERAL DE LA ENCUESTA ---

    // Funci칩n para continuar a la encuesta
    function proceedToSurvey() {
      const videoScreen = document.getElementById('video-screen');
      const mainContent = document.getElementById('main-content');
      
      if (videoScreen && mainContent) {
        videoScreen.style.display = 'none';
        mainContent.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        console.error("Error: No se encontraron los elementos necesarios");
      }
    }

    // Funci칩n para leer texto
    function leerTexto(texto) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(texto);
      utterance.lang = 'es-ES';
      synth.speak(utterance);
    }

    // Manejar el env칤o del formulario
    document.getElementById('donantesForm')?.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Gracias por completar la encuesta. Sus respuestas han sido enviadas.');
      // Aqu칤 puedes agregar la l칩gica para enviar el formulario a un servidor
    });

    // L칩gica para la navegaci칩n entre p치ginas
    let currentPage = 1;
    const totalPages = 3;

    function showPage(pageNumber) {
      // Ocultar todas las p치ginas
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      
      // Mostrar solo la p치gina solicitada
      const pageToShow = document.getElementById('page' + pageNumber);
      if (pageToShow) {
        pageToShow.classList.add('active');
        currentPage = pageNumber;
        // Hacer scroll al inicio de la p치gina
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    function nextPage() {
      if (currentPage < totalPages) {
        showPage(currentPage + 1);
      }
    }

    function prevPage(pageNumber) {
      showPage(pageNumber);
    }

    // --- FUNCIONES PARA PREGUNTAS CONDICIONALES ---

    // Funci칩n para mostrar/ocultar preguntas condicionales
    function toggleConditionalQuestions(radioName, containerId) {
      const radios = document.querySelectorAll(`input[name="${radioName}"]`);
      const detallesDiv = document.getElementById(containerId);

      let selectedValue = '';
      radios.forEach(radio => {
        if (radio.checked) {
          selectedValue = radio.value;
        }
      });

      if (selectedValue === 'si') {
        if (detallesDiv) detallesDiv.classList.add('active');
      } else {
        if (detallesDiv) {
          detallesDiv.classList.remove('active');
          // Limpiar campos cuando se oculta
          detallesDiv.querySelectorAll('input').forEach(input => {
            input.value = '';
          });
        }
      }
    }

    // Funci칩n especial para reacci칩n adversa - Versi칩n alternativa
    function toggleReaccionDetalle() {
      const reaccionDetalleContainer = document.getElementById('reaccion-detalle-container');
      const radios = document.querySelectorAll('input[name="reaccion_adversa"]');
        
      let selectedValue = '';
      radios.forEach(radio => {
        if (radio.checked) {
          selectedValue = radio.value;
        }
      });
      
      if (selectedValue === 'si') {
        if (reaccionDetalleContainer) {
          reaccionDetalleContainer.style.display = 'block';
        }
      } else {
        if (reaccionDetalleContainer) {
          reaccionDetalleContainer.style.display = 'none';
          // Limpiar el campo si existe
          const detalleInput = reaccionDetalleContainer.querySelector('input[name="reaccion_detalle"]');
          if (detalleInput) {
            detalleInput.value = '';
          }
        }
      }
    }

    // Inicializar todos los toggles condicionales
    function initConditionalQuestions() {
      // Configurar event listeners para todas las preguntas condicionales
      const conditionalConfigs = [
        { name: 'ha_donado', container: 'donacion-detalles' },
        { name: 'no_apto', container: 'no-apto-detalles' },
        { name: 'salud_bien', container: 'sintomas-resfriado' },
        { name: 'hospitalizado', container: 'hospitalizacion-detalles' },
        { name: 'transfusion', container: 'transfusion-detalles' },
        { name: 'odontologia', container: 'odontologia-detalles' },
        { name: 'problemas_salud', container: 'problemas-salud-detalles' },
        { name: 'tomo_medicamento', container: 'medicamentos-detalles' },
        { name: 'sintomas_recientes', container: 'sintomas-detalles' },
        { name: 'vacunado', container: 'vacunacion-detalles' }
      ];

      // Configurar listeners para cada grupo de radios
      conditionalConfigs.forEach(config => {
        const radios = document.querySelectorAll(`input[name="${config.name}"]`);
        if (radios.length > 0) {
          radios.forEach(radio => {
            radio.addEventListener('change', () => {
              toggleConditionalQuestions(config.name, config.container);
            });
          });
        }
      });

      // Configurar listener especial para reacci칩n adversa
      const radiosReaccion = document.querySelectorAll('input[name="reaccion_adversa"]');
      if (radiosReaccion.length > 0) {
        radiosReaccion.forEach(radio => {
          radio.addEventListener('change', toggleReaccionDetalle);
        });
      }

      // Inicializar estado inicial de todas las preguntas condicionales
      conditionalConfigs.forEach(config => {
        toggleConditionalQuestions(config.name, config.container);
      });
      toggleReaccionDetalle();
    }

    // --- L칍GICA DEL VIDEO Y FUNCIONALIDAD DE LA P츼GINA ---
    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('intro-video');
      const understoodBtn = document.getElementById('video-understood');
      const videoMessage = document.getElementById('video-message');
      const mainContent = document.getElementById('main-content');
      const videoScreen = document.getElementById('video-screen');

      // L칩gica de reproducci칩n del video
      if (video && understoodBtn && videoMessage) {
        setTimeout(() => {
          video.play();
        }, 2000);

        video.addEventListener('ended', function() {
          videoMessage.textContent = "쮼ntendi칩 el mensaje del video?";
          understoodBtn.style.display = 'block';
          understoodBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
      }

      // L칩gica de interacci칩n para la primera pregunta
      const radioButtons = document.querySelectorAll('input[name="entendio_info"]');
      const nextPageBtn = document.getElementById('next-page-btn-1');

      if (radioButtons.length > 0 && nextPageBtn && videoScreen && mainContent && video) {
        radioButtons.forEach(radio => {
          radio.addEventListener('change', function() {
            if (this.value === 'si') {
              nextPageBtn.style.display = 'inline-block';
            } else if (this.value === 'no') {
              mainContent.style.display = 'none';
              videoScreen.style.display = 'flex';
              nextPageBtn.style.display = 'none';
              
              // Reiniciar el video
              video.currentTime = 0;
              video.load();
              setTimeout(() => {
                video.play();
              }, 500);
            }
          });
        });
      }

      // --- L칍GICA PARA DEPARTAMENTOS Y MUNICIPIOS ---
      const departamentoSelect = document.getElementById('departamento');
      const municipioSelect = document.getElementById('municipio');

      if (departamentoSelect && municipioSelect && typeof municipiosPorDepartamento !== 'undefined') {
        // Cargar todos los departamentos disponibles en el select
        const departamentos = Object.keys(municipiosPorDepartamento);
        
        // Ordenar alfab칠ticamente los departamentos
        departamentos.sort();
        
        // Agregar cada departamento al select
        departamentos.forEach(function(departamento) {
          const option = document.createElement('option');
          option.value = departamento;
          option.textContent = departamento;
          departamentoSelect.appendChild(option);
        });
        
        // L칩gica para cargar municipios cuando se selecciona un departamento
        departamentoSelect.addEventListener('change', function() {
          const departamento = this.value;
          const municipios = municipiosPorDepartamento[departamento] || [];

          municipioSelect.innerHTML = '<option value="">Seleccione un municipio</option>';

          if (municipios && municipios.length > 0) {
            // Ordenar alfab칠ticamente los municipios
            municipios.sort();
            
            municipios.forEach(function(municipio) {
              const option = document.createElement('option');
              option.value = municipio;
              option.textContent = municipio;
              municipioSelect.appendChild(option);
            });
          }
        });
      }

    // --- L칍GICA PARA PREGUNTAS CONDICIONALES ---
    // Inicializar todas las preguntas condicionales
    initConditionalQuestions();

      // Asegurar que solo la p치gina 1 sea visible inicialmente
      showPage(1);
    });
  </script>
</body>
</html>