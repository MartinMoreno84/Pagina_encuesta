<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encuesta Donantes de Sangre</title>
  <style>
    /* Estilos generales */
    body {
      background-color: #ACD7CA;
      color: #316857;
      font-family: "Trebuchet MS", Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #1A4A5D;
      text-align: center;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    h2 {
      color: #1A4A5D;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
      margin-top: 25px;
    }
    h3 {
      color: #1A4A5D;
      margin-top: 20px;
      margin-bottom: 15px;
    }
    .question {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input[type="text"], input[type="date"], input[type="tel"], input[type="email"], select {
      width: calc(100% - 22px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 5px;
      font-family: "Trebuchet MS", Arial, sans-serif;
      font-size: 14px;
    }
    
    /* Estilos para la pantalla de video */
    #video-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
    }
    
    #video-container {
      width: 80%;
      max-width: 800px;
      margin: 20px 0;
    }
    
    #video-message {
      color: white;
      margin: 20px 0;
      font-size: 1.2em;
      text-align: center;
      max-width: 80%;
    }
    
    #video-understood {
      margin: 30px 0;
      background-color: #27ae60;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1.1em;
      display: none;
      position: sticky;
      bottom: 30px;
    }
    
    #video-understood:hover {
      background-color: #1e8449;
    }
    
    #intro-video {
      width: 100%;
      height: auto;
      max-height: 70vh;
    }
    
    /* Estilos para el logo fijo y centrado */
    #logo-fixed-header {
        position: fixed; /* Lo fija en la pantalla */
        top: 0;
        left: 0;
        width: 100%;
        text-align: center; /* Centra el logo horizontalmente */
        background-color: #ACD7CA; /* Color de fondo del encabezado */
        z-index: 1001; /* Asegura que est칠 por encima de otros elementos */
        padding: 10px 0; /* Espaciado interno */
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .logo {
        height: 80px; /* Mantiene el mismo tama침o del logo */
    }
    #main-content {
        display: none;
        padding-top: 100px; /* Agrega un padding superior para que el contenido no se oculte detr치s del logo fijo */
    }
    
    /* Estilos para los botones de S칤/No (SOLUCI칍N) */
    .respuesta-group {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
    .opcion-btn {
      padding: 10px 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      background-color: #f0f0f0;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
      flex: 1;
      text-align: center;
    }
    .opcion-btn:hover {
      background-color: #e0e0e0;
    }
    .opcion-btn input[type="radio"] {
      display: none; /* Oculta el radio button original */
    }
    .opcion-btn input[type="radio"]:checked + span {
      color: white;
      font-weight: bold;
    }
    .opcion-btn input[type="radio"]:checked[value="si"] + span {
      background-color: #27ae60; /* Color verde */
      border-color: #27ae60;
    }
    .opcion-btn input[type="radio"]:checked[value="no"] + span {
      background-color: #e74c3c; /* Color rojo */
      border-color: #e74c3c;
    }

    /* Navegaci칩n y otros botones */
    .navigation {
      text-align: center;
      margin-top: 20px;
    }
    .navigation button {
      padding: 10px 20px;
      margin: 5px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-family: "Trebuchet MS", Arial, sans-serif;
      font-size: 1em;
    }
    .navigation button:hover {
      background-color: #2980b9;
    }
    .audio-btn {
      background: none;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
      margin-left: 5px;
      vertical-align: middle;
      color: #3498db;
    }
    .audio-btn:hover {
      color: #2980b9;
    }

    .page { display: none; }
    .page.active { display: block; }
    
    /* Estilos para preguntas condicionales - MODIFICADO */
    .conditional-questions {
      margin-top: 15px;
      padding: 15px;
      background-color: #f9f9f9;
      border-left: 4px solid #3498db;
      border-radius: 4px;
      /* REMOVIMOS display: none de aqu칤 */
    }
    
    /* A칌ADIMOS esta clase para ocultar */
    .hidden {
      display: none !important;
    }
    
    .conditional-question {
      margin-bottom: 10px;
    }
    
    .conditional-question label {
      font-weight: normal;
      margin-bottom: 3px;
    }
    
    .conditional-question input[type="text"],
    .conditional-question input[type="date"],
    .conditional-question input[type="email"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    /* Estilos para la p치gina de mensaje informativo */
    .info-message {
      background-color: #e8f4f8;
      border-left: 5px solid #3498db;
      padding: 20px;
      margin: 25px 0;
      border-radius: 5px;
      font-size: 1.1em;
      line-height: 1.6;
    }
    
    .info-message-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .info-message h3 {
      margin: 0;
      color: #1A4A5D;
    }
    
    .message-audio-btn {
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }
    input[type="number"] {
      width: calc(100% - 22px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 5px;
      font-family: "Trebuchet MS", Arial, sans-serif;
      font-size: 14px;
    }

    /* Para los inputs dentro de la secci칩n de fechas */
    .seccion-mujeres-inputs {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .seccion-mujeres-inputs > div {
      flex: 1;
    }

    .seccion-mujeres-inputs label {
      font-weight: normal;
      font-size: 0.9em;
      margin-bottom: 3px;
    }
    
    .message-audio-btn:hover {
      background-color: #2980b9;
    }
  </style>
</head>
<body>
  <div id="logo-fixed-header">
    <img src="logo.png" alt="Logo Banco de Sangre" class="logo">
  </div>

  <div id="video-screen">
    <div id="video-message">
      Por favor, mira el video completo antes de continuar.
    </div>
    
    <div id="video-container">
      <video id="intro-video" controls muted>
        <source src="video_donacion.mp4" type="video/mp4">
        Tu navegador no soporta el elemento de video.
      </video>
    </div>
    
    <button id="video-understood" onclick="proceedToSurvey()">
      S칤, entend칤 el mensaje. Continuar con la encuesta
    </button>
  </div>

  <div id="main-content">
    <div class="container">
      <h1>Encuesta de Selecci칩n de Donantes</h1>
      <form id="donantesForm">

        <!-- P츼GINA 1 -->
        <div id="page1" class="page active">
          <div class="question">
            <label>1. 쯃ey칩 y entendi칩 la informaci칩n que se le dio antes de la donaci칩n?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯃ey칩 y entendi칩 la informaci칩n que se le dio antes de la donaci칩n?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="entendio_info" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="entendio_info" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
          <div class="navigation">
            <button type="button" onclick="nextPage()" id="next-page-btn-1" style="display:none;">Siguiente</button>
          </div>
        </div>

        <!-- P츼GINA 2 - DATOS PERSONALES -->
        <div id="page2" class="page">
          <h2>Datos Personales</h2>
          <div class="question">
            <label>1. Primer Nombre</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Primer nombre')">游댉</button>
            <input type="text" name="primer_nombre" required>
          </div>
          <div class="question">
            <label>2. Segundo Nombre</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Segundo nombre')">游댉</button>
            <input type="text" name="segundo_nombre">
          </div>
          <div class="question">
            <label>3. Primer Apellido</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Primer apellido')">游댉</button>
            <input type="text" name="primer_apellido" required>
          </div>
          <div class="question">
            <label>4. Segundo Apellido</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Segundo apellido')">游댉</button>
            <input type="text" name="segundo_apellido">
          </div>
          <div class="question">
            <label>5. Lugar de Nacimiento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Lugar de Nacimiento')">游댉</button>
            <input type="text" name="lugar_nacimiento" required>
          </div>
          <div class="question">
            <label>6. Edad (A침os)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Edad en a침os')">游댉</button>
            <input type="text" name="edad" required>
          </div>
          <div class="question">
            <label>7. G칠nero</label>
            <button type="button" class="audio-btn" onclick="leerTexto('G칠nero')">游댉</button>
            <select name="genero">
              <option value="">Seleccione</option>
              <option value="Masculino">Masculino</option>
              <option value="Femenino">Femenino</option>
            </select>
          </div>
          <div class="question">
            <label>8. Tipo de Documento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Tipo de Documento')">游댉</button>
            <select name="tipo_documento">
              <option value="">Seleccione</option>
              <option value="Cedula de Ciudadania">CC</option>
              <option value="Cedula de Extranger칤a">CE</option>
              <option value="Pasaporte">Pasaporte</option>
              <option value="PPT">PPT</option>
              <option value="PPE">PPE</option>
              <option value="NIUP">NIUP</option>
            </select>
          </div>
          <div class="question">
            <label>9. N칰mero de documento de identidad</label>
            <button type="button" class="audio-btn" onclick="leerTexto('N칰mero de su documento de identidad')">游댉</button>
            <input type="text" name="numero_documento" required>
          </div>
          <div class="question">
            <label>10. Estado Civil</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Estado civil')">游댉</button>
            <select name="estado_civil">
              <option value="">Seleccione</option>
              <option value="soltero">Soltero(a)</option>
              <option value="casado">Casado(a)</option>
              <option value="union_libre">Uni칩n libre</option>
              <option value="viudo">Viudo(a)</option>
            </select>
          </div>
          <div class="question">
            <label>11. Afiliaci칩n al sistema de Salud</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Afiliaci칩n al sistema de Salud')">游댉</button>
            <select name="afiliacion_salud">
              <option value="">Seleccione</option>
              <option value="No tiene">No tiene</option>
              <option value="EPS">EPS</option>
              <option value="Regimen Especial">Regimen Especial</option>
              <option value="Sisben">Sisben</option>
            </select>
          </div>
          <div class="question">
            <label>12 Grupo Sanguineo RH</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Seleccione su grupo sanguineo')">游댉</button>
            <select name="Grupo Sanguineo">
              <option value="">Seleccione</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="O+">O+</option>
              <option value="O-">O-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB-</option>
              <option value="Otro">Otro</option>
              <option value="No sabe">No sabe</option>
            </select>
          </div>
          <div class="question">
            <label>13. Lugar de Donaci칩n (ciudad o municipio)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Lugar de donaci칩n, ciudad o municipio')">游댉</button>
            <input type="text" name="lugar_donacion">
          </div>
          <div class="question">
            <label>14. Direcci칩n de residencia</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Direcci칩n de su residencia')">游댉</button>
            <input type="text" name="direccion_residencia">
          </div>
          <div class="question">
            <label>15. Barrio</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Barrio')">游댉</button>
            <input type="text" name="barrio">
          </div>
          <div class="question">
            <label>16. Localidad</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Localidad')">游댉</button>
            <input type="text" name="localidad">
          </div>
          <div class="question">
            <label>17. Departamento</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Departamento')">游댉</button>
            <select id="departamento" name="departamento" required>
              <option value="">Seleccione un departamento</option>
            </select>
          </div>
          <div class="question">
            <label>18. Municipio</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Municipio')">游댉</button>
            <select id="municipio" name="municipio" required>
              <option value="">Seleccione un municipio</option>
            </select>
          </div>
          <div class="question">
            <label>19. Tel칠fono Principal</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Tel칠fono principal')">游댉</button>
            <input type="tel" name="telefono">
          </div>
          <div class="question">
            <label>20. Celular</label>
            <button type="button" class="audio-btn" onclick="leerTexto('N칰mero de celular')">游댉</button>
            <input type="tel" name="celular">
          </div>
          <div class="question">
            <label>21. Ocupaci칩n / Empleo</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Ocupaci칩n o empleo')">游댉</button>
            <input type="text" name="ocupacion">
          </div>
          <div class="question">
            <label>22. Tel칠fono de Trabajo</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Tel칠fono de su trabajo')">游댉</button>
            <input type="tel" name="telefono_trabajo">
          </div>
          <div class="question">
            <label>23. Correo Electr칩nico</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Digite un correo electr칩nico')">游댉</button>
            <input type="email" name="correo_electronico" style="font-family: 'Trebuchet MS', Arial, sans-serif;">
          </div>
          <div class="question">
            <label>24. Redes sociales</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Seleccione la red social que mas usa')">游댉</button>
            <select name="redes_sociales">
              <option value="">Seleccione</option>
              <option value="Facebook">Facebook</option>
              <option value="Instagram">Instagram</option>
              <option value="X">X</option>
              <option value="Tik Tok">Tik Tok</option>
              <option value="Youtube">Youtube</option>
              <option value="Telegram">Telegram</option>
              <option value="Whatsapp">Whatsapp</option>
              <option value="Linked In">Linked In</option>
            </select>
          </div>
          <div class="question">
            <label>25. Usuario de Red social</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Cual es el usuario de la red seleccionada')">游댉</button>
            <input type="text" name="usuario_red_social">
          </div>
          <div class="question">
            <label>26. Nombre de un familiar y/o contacto</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Nombre de alg칰n familiar o contacto')">游댉</button>
            <input type="text" name="familiar_contacto">
          </div>
          <div class="question">
            <label>27. Celular de contacto</label>
            <button type="button" class="audio-btn" onclick="leerTexto('N칰mero de celular de la persona que puso de contacto')">游댉</button>
            <input type="tel" name="celular_contacto">
          </div>
          
          <div class="navigation">
            <button type="button" onclick="prevPage(1)">Anterior</button>
            <button type="button" onclick="nextPage()">Siguiente</button>
          </div>
        </div>

        <!-- P츼GINA 3 - ANTECEDENTES M칄DICOS -->
        <div id="page3" class="page">
          <h2>Antecedentes M칠dicos</h2>
      
          <!-- Pregunta 1: Donaci칩n anterior (CON FUNCIONALIDAD CONDICIONAL) -->
          <div class="question" id="donacion-anterior-container">
            <label>1. 쮿a donado sangre anteriormente?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a donado sangre anteriormente?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="ha_donado" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="ha_donado" value="no" required> <span>No</span>
              </label>
            </div>
    
            <!-- Preguntas condicionales que se muestran solo cuando la respuesta es "S칤" -->
            <div class="conditional-questions hidden" id="donacion-detalles">
              <div class="conditional-question">
                <label>쮿ace cu치nto? (Escriba la fecha):</label>
                <input type="date" name="fecha_ultima_donacion">
              </div>
      
              <div class="conditional-question">
                <label>쮼n d칩nde don칩?:</label>
                <input type="text" name="lugar_donacion_anterior" placeholder="Ej: Cl칤nica, Hospital, Banco de Sangre...">
              </div>
      
              <div class="conditional-question">
                <label>쮿a tenido reacci칩n adversa a la donaci칩n?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="reaccion_adversa" value="si" onchange="toggleReaccionDetalle()"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="reaccion_adversa" value="no" onchange="toggleReaccionDetalle()"> <span>No</span>
                  </label>
                </div>
                
                <!-- CORREGIDO: Este div debe estar DENTRO del conditional-question de reacci칩n -->
                <div id="reaccion-detalle-container" class="hidden" style="margin-top: 10px;">
                  <label>쯈u칠 present칩?:</label>
                  <input type="text" name="reaccion_detalle" placeholder="Describa la reacci칩n" style="width: 100%; padding: 8px;">
                </div>
              </div>
            </div>
          </div>
  
          <!-- Pregunta 2: Declarado no apto -->
          <div class="question" id="no-apto-container">
            <label>2. 쮿a sido declarado alguna vez no apto para donar sangre?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a sido declarado alguna vez no apto para donar sangre?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="no_apto" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="no_apto" value="no" required> <span>No</span>
              </label>
            </div>
    
            <div class="conditional-questions hidden" id="no-apto-detalles">
              <div class="conditional-question">
                <label>쯇or qu칠?:</label>
                <input type="text" name="razon_no_apto" placeholder="Describa la raz칩n">
              </div>
            </div>
          </div>
  
          <!-- Pregunta 3: Salud en 칰ltimas 2 semanas -->
          <div class="question" id="salud-reciente-container">
            <label>3. 쯉e ha sentido bien de salud en las 칰ltimas dos (2) semanas?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯉e ha sentido bien de salud en las 칰ltimas dos semanas?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="salud_bien" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="salud_bien" value="no" required> <span>No</span>
              </label>
            </div>
    
            <div class="conditional-questions hidden" id="sintomas-resfriado">
              <div class="conditional-question">
                <label>쮿a tenido gripa en las 칰ltimas dos (2) semanas?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tuvo_gripa" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tuvo_gripa" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
      
              <div class="conditional-question">
                <label>쮼st치 tosiendo o estornudando?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tos_estornudos" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tos_estornudos" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
  
          <!-- Pregunta 4: Hospitalizaci칩n -->
          <div class="question" id="hospitalizado-container">
            <label>4. 쮼n los 칰ltimos doce (12) meses estuvo Hospitalizado, bajo tratamiento m칠dico o le han realizado alguna cirug칤a?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos doce meses estuvo hospitalizado, bajo tratamiento m칠dico o le han realizado alguna cirug칤a?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="hospitalizado" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="hospitalizado" value="no" required> <span>No</span>
              </label>
            </div>
    
            <div class="conditional-questions hidden" id="hospitalizacion-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="detalle_hospitalizacion" placeholder="Describa la situaci칩n">
              </div>
            </div>
          </div>

          <!-- Pregunta 5: Transfusiones -->
          <div class="question" id="transfusion-container">
            <label>5. 쮸lguna vez usted o su pareja, han recibido transfusi칩n sangu칤nea, trasplante de 칩rganos, tejidos u hormona del crecimiento?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮸lguna vez usted o su pareja han recibido transfusi칩n sangu칤nea, trasplante de 칩rganos, tejidos u hormona del crecimiento?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="transfusion" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="transfusion" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions hidden" id="transfusion-detalles">
              <div class="conditional-question">
                <label>쮿ace cu치nto?:</label>
                <input type="text" name="tiempo_transfusion" placeholder="Ej: Hace 2 a침os, 6 meses...">
              </div>
            </div>
          </div>

          <!-- Pregunta 6: Tratamientos dentales -->
          <div class="question" id="odontologia-container">
            <label>6. 쮼n los 칰ltimos 7 d칤as le han realizado tratamientos dentales?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos 7 d칤as le han realizado tratamientos dentales?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="odontologia" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="odontologia" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions hidden" id="odontologia-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="detalle_odontologia" placeholder="Ej: Extracci칩n, limpieza, empaste...">
              </div>
            </div>
          </div>

          <!-- Pregunta 7: Problemas de salud -->
          <div class="question">
            <label>7. 쮿a presentado alguno de los siguientes problemas de salud? (enfermedades de la sangre, coraz칩n, trastornos mentales, diabetes, c치ncer, enfermedades de pulm칩n, hipotensi칩n, hipertensi칩n)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a presentado alguno de los siguientes problemas de salud?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="problemas_salud" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="problemas_salud" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions hidden" id="problemas-salud-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="detalle_problemas_salud" placeholder="Especifique la enfermedad">
              </div>

              <div class="conditional-question">
                <label>쯉ufre de alergias? 쮸 qu칠 es al칠rgico?:</label>
                <input type="text" name="alergias" placeholder="Ej: Penicilina, polen, alimentos...">
              </div>

              <div class="conditional-question">
                <label>쯋sted o alguien de su familia sufre de anemia falciforme o rasgo de anemia falciforme?</label>
                <input type="text" name="anemia_falciforme" placeholder="Especifique qui칠n y relaci칩n">
              </div>
            </div>
          </div>

          <!-- Pregunta 8: Medicamentos y otras enfermedades -->
          <div class="question">
            <label>8. En el 칰ltimo mes 쯛a tomado alg칰n medicamento?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('En el 칰ltimo mes, 쯛a tomado alg칰n medicamento?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="tomo_medicamento" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="tomo_medicamento" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions hidden" id="medicamentos-detalles">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="nombre_medicamento" placeholder="Nombre del medicamento">
              </div>

              <div class="conditional-question">
                <label>쯇ara qu칠 le fue formulado?:</label>
                <input type="text" name="razon_medicamento" placeholder="Motivo del tratamiento">
              </div>

              <div class="conditional-question">
                <label>쮿a padecido o padece de alguna enfermedad no mencionada anteriormente? 쮺u치l?:</label>
                <input type="text" name="otras_enfermedades" placeholder="Otras enfermedades">
              </div>
            </div>
          </div>

          <!-- Pregunta 9: S칤ntomas 칰ltimos 6 meses -->
          <div class="question">
            <label>9. 쮼n los 칰ltimos seis (6) meses ha presentado alguno de los siguientes s칤ntomas? P칠rdida de peso inexplicable, Diarrea frecuente no controlable, Sudoraci칩n nocturna, Tos persistente (por m치s de dos semanas), Inflamaci칩n permanente de los ganglios, Manchas o lesiones en la piel o mucosas, Fiebres frecuentes.</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos seis meses ha presentado alguno de los siguientes s칤ntomas?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="sintomas_recientes" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="sintomas_recientes" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions hidden" id="sintomas-detalles">
              <div class="conditional-question">
                <label>Especifique los s칤ntomas:</label>
                <input type="text" name="detalle_sintomas" placeholder="Describa los s칤ntomas presentados">
              </div>
            </div>
          </div>

          <!-- Pregunta 10: Vacunaci칩n -->
          <div class="question" id="vacunacion-container">
            <label>10. 쮿a sido vacunado en el 칰ltimo a침o?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a sido vacunado en el 칰ltimo a침o?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="vacunado" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="vacunado" value="no" required> <span>No</span>
              </label>
            </div>

            <div class="conditional-questions hidden" id="vacunacion-detalles">
              <div class="conditional-question">
                <label>쯈u칠 vacuna recibi칩?:</label>
                <input type="text" name="tipo_vacuna" placeholder="Ej: Influenza, COVID-19, Hepatitis...">
              </div>
            </div>
          </div>

          <div class="navigation">
            <button type="button" onclick="prevPage(2)">Anterior</button>
            <button type="button" onclick="nextPage()">Siguiente</button>
          </div>
        </div> 

        <!-- P츼GINA 4 - MENSAJE INFORMATIVO -->
        <div id="page4" class="page">
          <h2>Informaci칩n Importante para el Donante</h2>
          
          <div class="info-message">
            <div class="info-message-header">
              <h3>APRECIADO DONANTE:</h3>
              <button type="button" class="message-audio-btn" onclick="leerMensajeCompleto()">
                游댉
              </button>
            </div>
            <p>
              Con las preguntas que vienen a continuaci칩n, buscamos asegurar que los pacientes que van a recibir su sangre no van a correr riesgo de contraer una enfermedad infecciosa a trav칠s de la transfusi칩n.
            </p>
          </div>

          <div class="navigation">
            <button type="button" onclick="prevPage(3)">Anterior</button>
            <button type="button" onclick="nextPage(5)">Siguiente</button>
          </div>
        </div>
        <!-- P츼GINA 5 - EVALUACI칍N DE RIESGO BIOL칍GICO Y SEXUAL -->
        <div id="page5" class="page">
          <h2>Evaluaci칩n de Riesgo Biol칩gico y Sexual</h2>
          
          <!-- Pregunta 11 -->
          <div class="question">
            <label>11. 쮿a tenido una nueva pareja sexual en los 칰ltimos seis (6) meses?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a tenido una nueva pareja sexual en los 칰ltimos seis meses?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="nueva_pareja" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="nueva_pareja" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 12 -->
          <div class="question">
            <label>12. 쮿a tenido relaciones sexuales con personas pertenecientes a alguna de las siguientes poblaciones: trabajadores sexuales, habitantes de calle, personas que se inyectan drogas?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a tenido relaciones sexuales con personas pertenecientes a alguna de las siguientes poblaciones: trabajadores sexuales, habitantes de calle, personas que se inyectan drogas?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="relaciones_riesgo" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="relaciones_riesgo" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 13 -->
          <div class="question">
            <label>13. 쮿a recibido sustancias psicoactivas o dinero a cambio de relaciones sexuales?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a recibido sustancias psicoactivas o dinero a cambio de relaciones sexuales?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="sexo_por_dinero" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="sexo_por_dinero" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 14 -->
          <div class="question">
            <label>14. 쮿a tenido relaciones sexuales con personas diagnosticadas con VIH, Hepatitis B, Hepatitis C, HTLV I/II, S칤filis?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a tenido relaciones sexuales con personas diagnosticadas con VIH, Hepatitis B, Hepatitis C, HTLV uno dos, S칤filis?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="relaciones_enfermos" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="relaciones_enfermos" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 15 -->
          <div class="question">
            <label>15. 쮼n los 칰ltimos doce (12) meses usted o su pareja sexual han estado privados de la libertad?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos doce meses usted o su pareja sexual han estado privados de la libertad?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="privados_libertad" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="privados_libertad" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 16 - CON DETALLE CONDICIONAL -->
          <div class="question" id="drogas-container">
            <label>16. 쯋s칩 o usa marihuana, coca칤na, hero칤na, bazuco, o alguna sustancia psicoactiva o alg칰n otro estimulante o alucin칩geno?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯋s칩 o usa marihuana, coca칤na, hero칤na, bazuco, o alguna sustancia psicoactiva o alg칰n otro estimulante o alucin칩geno?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="uso_drogas" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="uso_drogas" value="no" required> <span>No</span>
              </label>
            </div>
            
            <div class="conditional-questions hidden" id="drogas-detalle">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="tipo_droga" placeholder="Especifique la sustancia">
              </div>
            </div>
          </div>
        
          <!-- Pregunta 17 - COMPLEJA CON M칔LTIPLES SUBPREGUNTAS -->
          <div class="question" id="ets-container">
            <label>17. 쯊uvo o ha sido tratado para s칤filis, gonorrea, herpes genital, condiloma, papiloma virus, hepatitis, SIDA u otra enfermedad de transmisi칩n sexual?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯊uvo o ha sido tratado para s칤filis, gonorrea, herpes genital, condiloma, papiloma virus, hepatitis, SIDA u otra enfermedad de transmisi칩n sexual?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="tuvo_ets" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="tuvo_ets" value="no" required> <span>No</span>
              </label>
            </div>
            
            <div class="conditional-questions hidden" id="ets-detalles">
              <!-- Subpregunta A -->
              <div class="conditional-question">
                <label>A. 쯋sted recuerda si alguna vez en su vida ha botado por el pene o vagina alguna secreci칩n blanca o verde?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="secrecion_genital" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="secrecion_genital" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta A1 -->
              <div class="conditional-question">
                <label>쮿ace cu치nto?</label>
                <input type="text" name="tiempo_secrecion" placeholder="Ej: Hace 1 a침o, 6 meses...">
              </div>
              
              <!-- Subpregunta A2 -->
              <div class="conditional-question">
                <label>Fue tratado:</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tratado_secrecion" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tratado_secrecion" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta A3 -->
              <div class="conditional-question">
                <label>Se cur칩:</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="curado_secrecion" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="curado_secrecion" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta B -->
              <div class="conditional-question">
                <label>B. 쯋sted recuerda si ha tenido lesi칩n, grano, llaga, verruga en el pene o vagina?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="lesion_genital" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="lesion_genital" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta B1 -->
              <div class="conditional-question">
                <label>쮿ace cu치nto?</label>
                <input type="text" name="tiempo_lesion" placeholder="Ej: Hace 2 a침os...">
              </div>
              
              <!-- Subpregunta B2 -->
              <div class="conditional-question">
                <label>Fue tratado:</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tratado_lesion" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tratado_lesion" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta B3 -->
              <div class="conditional-question">
                <label>Se cur칩:</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="curado_lesion" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="curado_lesion" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta C -->
              <div class="conditional-question">
                <label>C. 쯋sted recuerda si alguna vez en su vida ha tenido s칤filis?</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tuvo_sifilis" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tuvo_sifilis" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta C1 -->
              <div class="conditional-question">
                <label>쮿ace cu치nto?</label>
                <input type="text" name="tiempo_sifilis" placeholder="Ej: Hace 5 a침os...">
              </div>
              
              <!-- Subpregunta C2 -->
              <div class="conditional-question">
                <label>Fue tratado:</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="tratado_sifilis" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="tratado_sifilis" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
              
              <!-- Subpregunta C3 -->
              <div class="conditional-question">
                <label>Se cur칩:</label>
                <div class="respuesta-group">
                  <label class="opcion-btn">
                    <input type="radio" name="curado_sifilis" value="si"> <span>S칤</span>
                  </label>
                  <label class="opcion-btn">
                    <input type="radio" name="curado_sifilis" value="no"> <span>No</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        
          <!-- Pregunta 18 -->
          <div class="question">
            <label>18. 쮼n los 칰ltimos seis (6) meses le han practicado acupuntura, tatuajes, perforaciones de oreja, piercing, maquillaje permanente u otros procedimientos?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos seis meses le han practicado acupuntura, tatuajes, perforaciones de oreja, piercing, maquillaje permanente u otros procedimientos?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="procedimientos_piel" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="procedimientos_piel" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 19 -->
          <div class="question">
            <label>19. 쮼n el 칰ltimo mes ha estado en contacto con personas que padezcan sarampi칩n, rub칠ola, paperas o varicela?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n el 칰ltimo mes ha estado en contacto con personas que padezcan sarampi칩n, rub칠ola, paperas o varicela?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="contacto_enfermedades" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="contacto_enfermedades" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 20 -->
          <div class="question">
            <label>20. 쮼n los 칰ltimos seis (6) meses ha tenido accidentes de riesgo biol칩gico (contacto con sangre, l칤quidos corporales, pinchazos con agujas contaminadas)?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos seis meses ha tenido accidentes de riesgo biol칩gico, contacto con sangre, l칤quidos corporales, pinchazos con agujas contaminadas?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="accidente_biologico" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="accidente_biologico" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 21 - CON DETALLE CONDICIONAL -->
          <div class="question" id="enfermedades-tropicales-container">
            <label>21. 쮸lguna vez en su vida se ha enfermado o ha recibido tratamiento para paludismo, leishmaniasis, fiebre amarilla, dengue, Zika y Chikungunya?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮸lguna vez en su vida se ha enfermado o ha recibido tratamiento para paludismo, leishmaniasis, fiebre amarilla, dengue, Zika y Chikungunya?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="enfermedades_tropicales" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="enfermedades_tropicales" value="no" required> <span>No</span>
              </label>
            </div>
            
            <div class="conditional-questions hidden" id="enfermedades-detalle">
              <div class="conditional-question">
                <label>쮺u치l?:</label>
                <input type="text" name="tipo_enfermedad_tropical" placeholder="Ej: Dengue, Paludismo...">
              </div>
            </div>
          </div>
        
          <!-- Pregunta 22 -->
          <div class="question">
            <label>22. 쮼n los 칰ltimos 2 a침os ha visitado zonas donde hay paludismo, leishmaniasis, fiebre amarilla o dengue?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮼n los 칰ltimos 2 a침os ha visitado zonas donde hay paludismo, leishmaniasis, fiebre amarilla o dengue?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="visito_zona_riesgo" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="visito_zona_riesgo" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 23 -->
          <div class="question">
            <label>23. 쮿a tenido enfermedad de Chagas o ha estado en zonas donde habita el insecto pito, chinche picudo, besador, rondador o chupa sangre?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a tenido enfermedad de Chagas o ha estado en zonas donde habita el insecto pito, chinche picudo, besador, rondador o chupa sangre?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="chagas_zona" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="chagas_zona" value="no" required> <span>No</span>
              </label>
            </div>
          </div>
        
          <!-- Pregunta 24 - CON M칔LTIPLES DETALLES -->
          <div class="question" id="viajes-container">
            <label>24. 쮿a vivido fuera del pa칤s o de la ciudad en que reside actualmente?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쮿a vivido fuera del pa칤s o de la ciudad en que reside actualmente?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="vivido_fuera" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="vivido_fuera" value="no" required> <span>No</span>
              </label>
            </div>
            
            <div class="conditional-questions hidden" id="viajes-detalles">
              <div class="conditional-question">
                <label>쮻칩nde?</label>
                <input type="text" name="lugar_viaje" placeholder="Ej: M칠xico, Espa침a, Otra ciudad...">
              </div>
              
              <div class="conditional-question">
                <label>쮿ace cu치nto?</label>
                <input type="text" name="tiempo_viaje" placeholder="Ej: Hace 3 a침os, 6 meses...">
              </div>
              
              <div class="conditional-question">
                <label>쯇or cu치nto tiempo?</label>
                <input type="text" name="duracion_viaje" placeholder="Ej: 2 semanas, 6 meses, 1 a침o...">
              </div>
            </div>
          </div>
        
          <!-- Pregunta 25 -->
          <div class="question">
            <label>25. 쯃ey칩 y comprendi칩 el cuestionario y fueron contestadas todas sus dudas al respecto?</label>
            <button type="button" class="audio-btn" onclick="leerTexto('쯃ey칩 y comprendi칩 el cuestionario y fueron contestadas todas sus dudas al respecto?')">游댉</button>
            <div class="respuesta-group">
              <label class="opcion-btn">
                <input type="radio" name="comprendio_cuestionario" value="si" required> <span>S칤</span>
              </label>
              <label class="opcion-btn">
                <input type="radio" name="comprendio_cuestionario" value="no" required> <span>No</span>
              </label>
            </div>
            
            <div class="conditional-questions hidden" id="actividad-detalle">
              <div class="conditional-question">
                <label>쯈u칠 actividad realizar치 despu칠s de la donaci칩n?</label>
                <input type="text" name="actividad_post_donacion" placeholder="Ej: Descansar, Trabajar, Estudiar...">
              </div>
            </div>
          </div>
        
          <!-- SECCI칍N ESPECIAL PARA MUJERES -->
          <div id="seccion-mujeres" class="hidden">
            <h3>Secci칩n Especial para Mujeres</h3>
            
            <!-- Pregunta 26 -->
            <label>26. Fecha de la 칰ltima menstruaci칩n (D칤a/Mes/A침o)</label>
            <button type="button" class="audio-btn" onclick="leerTexto('Fecha de la 칰ltima menstruaci칩n, d칤a, mes, a침o')">游댉</button>
            <div class="seccion-mujeres-inputs">
              <div>
                <label>D칈A</label>
                <input type="number" name="ultima_regla_dia" min="1" max="31" placeholder="DD">
              </div>
              <div>
                <label>MES</label>
                <select name="ultima_regla_mes">
                  <option value="">Mes</option>
                  <option value="01">Enero</option>
                  <option value="02">Febrero</option>
                  <!-- ... resto de meses ... -->
                </select>
              </div>
              <div>
                <label>A칌O</label>
                <input type="number" name="ultima_regla_anio" min="2000" max="2025" placeholder="AAAA">
              </div>
            </div>
                    
            <!-- Pregunta 27 -->
            <div class="question">
              <label>27. 쮺u치ntos embarazos, partos y abortos ha tenido?</label>
              <button type="button" class="audio-btn" onclick="leerTexto('쮺u치ntos embarazos, partos y abortos ha tenido?')">游댉</button>
              <div style="display: flex; gap: 15px; margin-top: 10px;">
                <div style="flex: 1;">
                  <label>Embarazos</label>
                  <input type="number" name="numero_embarazos" min="0" max="20" placeholder="0" style="width: 100%;">
                </div>
                <div style="flex: 1;">
                  <label>Partos</label>
                  <input type="number" name="numero_partos" min="0" max="20" placeholder="0" style="width: 100%;">
                </div>
                <div style="flex: 1;">
                  <label>Abortos</label>
                  <input type="number" name="numero_abortos" min="0" max="20" placeholder="0" style="width: 100%;">
                </div>
              </div>
            </div>
        
            <!-- Pregunta 28 - CON DETALLE CONDICIONAL -->
            <div class="question" id="embarazo-container">
              <label>28. 쮼st치 embarazada, lactando o ha tenido abortos, legrados, partos o ces치reas en el 칰ltimo a침o?</label>
              <button type="button" class="audio-btn" onclick="leerTexto('쮼st치 embarazada, lactando o ha tenido abortos, legrados, partos o ces치reas en el 칰ltimo a침o?')">游댉</button>
              <div class="respuesta-group">
                <label class="opcion-btn">
                  <input type="radio" name="embarazo_reciente" value="si" required> <span>S칤</span>
                </label>
                <label class="opcion-btn">
                  <input type="radio" name="embarazo_reciente" value="no" required> <span>No</span>
                </label>
              </div>
              
              <div class="conditional-questions hidden" id="embarazo-detalle">
                <div class="conditional-question">
                  <label>쮺u치l?</label>
                  <input type="text" name="detalle_embarazo" placeholder="Ej: Embarazada actualmente, Ces치rea hace 6 meses...">
                </div>
              </div>
            </div>
          </div>
        
          <div class="navigation">
            <button type="button" onclick="prevPage(4)">Anterior</button>
            <button type="submit">Enviar Encuesta</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script>
    // --- L칍GICA GENERAL DE LA ENCUESTA ---

    // Funci칩n para continuar a la encuesta
    function proceedToSurvey() {
      const videoScreen = document.getElementById('video-screen');
      const mainContent = document.getElementById('main-content');
      
      if (videoScreen && mainContent) {
        videoScreen.style.display = 'none';
        mainContent.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        console.error("Error: No se encontraron los elementos necesarios");
      }
    }

    // Funci칩n para leer texto
    function leerTexto(texto) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(texto);
      utterance.lang = 'es-ES';
      synth.speak(utterance);
    }

    // Funci칩n para leer el mensaje completo de la p치gina 4
    function leerMensajeCompleto() {
      const mensajeCompleto = "APRECIADO DONANTE: Con las preguntas que vienen a continuaci칩n, buscamos asegurar que los pacientes que van a recibir su sangre no van a correr riesgo de contraer una enfermedad infecciosa a trav칠s de la transfusi칩n.";
      leerTexto(mensajeCompleto);
    }

    // Manejar el env칤o del formulario
    document.getElementById('donantesForm')?.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Gracias por completar la encuesta. Sus respuestas han sido enviadas.');
      // Aqu칤 puedes agregar la l칩gica para enviar el formulario a un servidor
    });

    // L칩gica para la navegaci칩n entre p치ginas
    let currentPage = 1;
    const totalPages = 5;

    function showPage(pageNumber) {
      // Ocultar todas las p치ginas
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      
      // Mostrar solo la p치gina solicitada
      const pageToShow = document.getElementById('page' + pageNumber);
      if (pageToShow) {
        pageToShow.classList.add('active');
        currentPage = pageNumber;
        // Hacer scroll al inicio de la p치gina
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    function nextPage() {
      if (currentPage < totalPages) {
        showPage(currentPage + 1);
      }
    }

    function prevPage(pageNumber) {
      showPage(pageNumber);
    }

    // --- FUNCIONES PARA PREGUNTAS CONDICIONALES ---

    // Funci칩n para mostrar/ocultar preguntas condicionales
    function toggleConditionalQuestions(radioName, containerId) {
      const radios = document.querySelectorAll(`input[name="${radioName}"]`);
      const detallesDiv = document.getElementById(containerId);

      let selectedValue = '';
      radios.forEach(radio => {
        if (radio.checked) {
          selectedValue = radio.value;
        }
      });

      if (selectedValue === 'si') {
        if (detallesDiv) {
          detallesDiv.classList.remove('hidden');
        }
      } else {
        if (detallesDiv) {
          detallesDiv.classList.add('hidden');
          // Limpiar campos cuando se oculta
          detallesDiv.querySelectorAll('input').forEach(input => {
            input.value = '';
          });
        }
      }
    }

    // Funci칩n simplificada para reacci칩n adversa
    function toggleReaccionDetale() {
      const reaccionDetalleContainer = document.getElementById('reaccion-detalle-container');
      const siRadio = document.querySelector('input[name="reaccion_adversa"][value="si"]');
      
      if (siRadio && siRadio.checked) {
        reaccionDetalleContainer.classList.remove('hidden');
      } else {
        reaccionDetalleContainer.classList.add('hidden');
        // Limpiar el campo
        const detalleInput = document.querySelector('input[name="reaccion_detalle"]');
        if (detalleInput) detalleInput.value = '';
      }
    }
    // Funci칩n para mostrar/ocultar secci칩n mujeres:
      function toggleSeccionMujeres() {
        const generoSelect = document.querySelector('select[name="genero"]');
        const seccionMujeres = document.getElementById('seccion-mujeres');

        if (generoSelect && seccionMujeres) {
          generoSelect.addEventListener('change', function() {
            if (this.value === 'Femenino') {
              seccionMujeres.classList.remove('hidden');
            } else {
              seccionMujeres.classList.add('hidden');
              // Limpiar campos de secci칩n mujeres
              seccionMujeres.querySelectorAll('input, select').forEach(input => {
                input.value = '';
              });
            }
          });

          // Ejecutar al inicio
          if (generoSelect.value === 'Femenino') {
            seccionMujeres.classList.remove('hidden');
          }
        }
      }
    // Inicializar todos los toggles condicionales
    function initConditionalQuestions() {
      console.log('Inicializando preguntas condicionales...');
      
      // Configurar event listeners para todas las preguntas condicionales
      const conditionalConfigs = [
        { name: 'ha_donado', container: 'donacion-detalles' },
        { name: 'no_apto', container: 'no-apto-detalles' },
        { name: 'salud_bien', container: 'sintomas-resfriado' },
        { name: 'hospitalizado', container: 'hospitalizacion-detalles' },
        { name: 'transfusion', container: 'transfusion-detalles' },
        { name: 'odontologia', container: 'odontologia-detalles' },
        { name: 'problemas_salud', container: 'problemas-salud-detalles' },
        { name: 'tomo_medicamento', container: 'medicamentos-detalles' },
        { name: 'sintomas_recientes', container: 'sintomas-detalles' },
        { name: 'vacunado', container: 'vacunacion-detalles' },
        { name: 'uso_drogas', container: 'drogas-detalle' },
        { name: 'tuvo_ets', container: 'ets-detalles' },
        { name: 'enfermedades_tropicales', container: 'enfermedades-detalle' },
        { name: 'vivido_fuera', container: 'viajes-detalles' },
        { name: 'comprendio_cuestionario', container: 'actividad-detalle' },
        { name: 'embarazo_reciente', container: 'embarazo-detalle' }
      ];

      // Configurar listeners para cada grupo de radios
      conditionalConfigs.forEach(config => {
        const radios = document.querySelectorAll(`input[name="${config.name}"]`);
        
        if (radios.length > 0) {
          radios.forEach(radio => {
            radio.addEventListener('change', () => {
              toggleConditionalQuestions(config.name, config.container);
            });
            
            // Tambi칠n ejecutar al inicio para establecer estado inicial
            if (radio.checked) {
              toggleConditionalQuestions(config.name, config.container);
            }
          });
        }
      });

      // Configurar listener especial para reacci칩n adversa
      const radiosReaccion = document.querySelectorAll('input[name="reaccion_adversa"]');
      
      if (radiosReaccion.length > 0) {
        radiosReaccion.forEach(radio => {
          radio.addEventListener('change', toggleReaccionDetale);
          
          // Tambi칠n ejecutar al inicio
          if (radio.checked) {
            toggleReaccionDetale();
          }
        });
      }

      // Inicializar estado inicial de todas las preguntas condicionales
      conditionalConfigs.forEach(config => {
        toggleConditionalQuestions(config.name, config.container);
      });
      toggleReaccionDetale(); // Inicializar reacci칩n adversa
      
      console.log('Preguntas condicionales inicializadas');
    }

    // --- L칍GICA DEL VIDEO Y FUNCIONALIDAD DE LA P츼GINA ---
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM completamente cargado');
      
      const video = document.getElementById('intro-video');
      const understoodBtn = document.getElementById('video-understood');
      const videoMessage = document.getElementById('video-message');
      const mainContent = document.getElementById('main-content');
      const videoScreen = document.getElementById('video-screen');

      // L칩gica de reproducci칩n del video
      if (video && understoodBtn && videoMessage) {
        setTimeout(() => {
          video.play().catch(e => console.log('Autoplay bloqueado, el usuario debe iniciar manualmente'));
        }, 2000);

        video.addEventListener('ended', function() {
          videoMessage.textContent = "쮼ntendi칩 el mensaje del video?";
          understoodBtn.style.display = 'block';
          understoodBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
      }

      // L칩gica de interacci칩n para la primera pregunta
      const radioButtons = document.querySelectorAll('input[name="entendio_info"]');
      const nextPageBtn = document.getElementById('next-page-btn-1');

      if (radioButtons.length > 0 && nextPageBtn && videoScreen && mainContent && video) {
        radioButtons.forEach(radio => {
          radio.addEventListener('change', function() {
            if (this.value === 'si') {
              nextPageBtn.style.display = 'inline-block';
            } else if (this.value === 'no') {
              mainContent.style.display = 'none';
              videoScreen.style.display = 'flex';
              nextPageBtn.style.display = 'none';
              
              // Reiniciar el video
              video.currentTime = 0;
              video.load();
              setTimeout(() => {
                video.play().catch(e => console.log('Autoplay bloqueado'));
              }, 500);
            }
          });
        });
      }

      // --- L칍GICA PARA DEPARTAMENTOS Y MUNICIPIOS ---
      const departamentoSelect = document.getElementById('departamento');
      const municipioSelect = document.getElementById('municipio');

      if (departamentoSelect && municipioSelect) {
        // Datos de ejemplo para Colombia
        const municipiosPorDepartamento = {
          "Antioquia": ["Medell칤n", "Bello", "Itag칲칤", "Envigado", "Rionegro"],
          "Cundinamarca": ["Bogot치", "Soacha", "Ch칤a", "Zipaquir치", "Facatativ치"],
          "Valle del Cauca": ["Cali", "Palmira", "Buenaventura", "Tulu치", "Cartago"],
          "Atl치ntico": ["Barranquilla", "Soledad", "Malambo", "Puerto Colombia"],
          "Santander": ["Bucaramanga", "Floridablanca", "Gir칩n", "Piedecuesta"],
          "Bol칤var": ["Cartagena", "Magangu칠", "Turbaco", "Arjona"],
          "Nari침o": ["Pasto", "Ipiales", "Tumaco", "Samaniego"],
          "C칩rdoba": ["Monter칤a", "Ceret칠", "Lorica", "Sahag칰n"],
          "Boyac치": ["Tunja", "Duitama", "Sogamoso", "Chiquinquir치"],
          "Meta": ["Villavicencio", "Acac칤as", "Granada", "San Mart칤n"]
        };

        // Cargar todos los departamentos disponibles en el select
        const departamentos = Object.keys(municipiosPorDepartamento);
        
        // Ordenar alfab칠ticamente los departamentos
        departamentos.sort();
        
        // Agregar cada departamento al select
        departamentos.forEach(function(departamento) {
          const option = document.createElement('option');
          option.value = departamento;
          option.textContent = departamento;
          departamentoSelect.appendChild(option);
        });
        
        // L칩gica para cargar municipios cuando se selecciona un departamento
        departamentoSelect.addEventListener('change', function() {
          const departamento = this.value;
          const municipios = municipiosPorDepartamento[departamento] || [];

          municipioSelect.innerHTML = '<option value="">Seleccione un municipio</option>';

          if (municipios && municipios.length > 0) {
            // Ordenar alfab칠ticamente los municipios
            municipios.sort();
            
            municipios.forEach(function(municipio) {
              const option = document.createElement('option');
              option.value = municipio;
              option.textContent = municipio;
              municipioSelect.appendChild(option);
            });
          }
        });

        // Cargar municipios si ya hay un departamento seleccionado
        if (departamentoSelect.value) {
          const event = new Event('change');
          departamentoSelect.dispatchEvent(event);
        }
      }

      // --- L칍GICA PARA PREGUNTAS CONDICIONALES ---
      // Inicializar todas las preguntas condicionales
      initConditionalQuestions();

      // Asegurar que solo la p치gina 1 sea visible inicialmente
      showPage(1);
      
      // Forzar una verificaci칩n inicial de todos los estados
      setTimeout(() => {
        console.log('Verificaci칩n final de estados');
        // Verificar si hay radios ya seleccionados (por si acaso)
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
          if (radio.checked) {
            console.log(`Radio ${radio.name} est치 seleccionado con valor ${radio.value}`);
            // Disparar el evento change manualmente
            const event = new Event('change');
            radio.dispatchEvent(event);
          }
        });
      }, 500);
      toggleSeccionMujeres();
    });
  </script>
</body>
</html>